# mp3DirectCut 无障碍增强插件

* 作者：Abdel, Rémy, Abdellah zineddine, Jean-François COLAS
* 下载 [稳定版][1]
* 下载 [开发版][2]

# 功能概述 #

此插件显著提升 NVDA 屏幕阅读器在 mp3DirectCut 软件中的无障碍访问体验。

已测试兼容 mp3DirectCut 212 至 233 版本。

## 键盘快捷键 ##

此插件提供以下快捷键：

* B 键

    * 确认标记区间B的开头。

* Ctrl+Shift+B

    * 标记区间B的开头。
    * 双击读出选择区段总时长。

* Ctrl+Shift+D

    * 读出从文件开始到播放光标的时长。
    * 双击读出文件总时长。

* Ctrl+R

    * 确认所选内容已被取消。

* Ctrl+Shift+R

    * 读出从播放光标到文件末尾的剩余时间。

* Ctrl+Shift+E

    * 标记区间N的结束位置。
    * 双击读出区间B和N的位置和时长。

* Ctrl+Shift+P

    * 读出当前文件的分段编号与总段数。

* Ctrl+Shift+空格

    * 录音时检测音量表实时电平。
    * 双击重置电平检测。

* 下光标键

    * 读出播放头当前位置。
    * 若存在选择区段，将光标定位至选择结束标记点 N 并读出其位置。
    * 在音量对话框中读出下光标键可调整的数值。
    * 此数值默认不读出。

* End 键

    * 将播放光标移至文件末尾并读出总时长。

* Home 键

    * 将播放光标移至文件开头。

* 左光标键

    * 播放时后退 1 秒并读出当前时长。
    * 读出当前时长可在 mp3directcut 选项配置。

* N 键

    * 确认选择结束标记点 N 已正确放置。

* Page Down 键

    * 播放时前进 10 秒并读出当前时长。
    * 读出当前时长可在 mp3directcut 选项配置。

* Page Up 键

    * 播放时后退 10 秒并读出当前时长。
    * 读出当前时长可在 mp3directcut 选项配置。

* R 键

    * 准备录音并提示可按空格键开始。

* 右光标键

    * 播放时前进 1 秒并读出当前时长。
    * 读出当前时长可在 mp3directcut 选项配置。

* Ctrl+右光标键

    * 跳至下一分割点并读出当前时长。

* Ctrl+左光标键

    * 跳至上一分割点并读出当前时长。

* Shift+右光标键

    * 播放时前进 0.04 秒并读出当前时长。

* Shift+左光标键

    * 播放时后退 0.04 秒并读出当前时长。

* S 键

    * 停止播放并读出当前时长。

* 空格键

    * 录音准备就绪时：开始录音。
    * 录音过程中：停止录音并将光标置于开头。
    * 文件加载后：开始播放。
    * 播放过程中：暂停播放并读出当前时长。
    * 暂停状态时：从当前位置继续播放。

* 上光标键

    * 读出播放头当前位置。
    * 若存在选择区段，将光标定位至选择起始标记点 B 并读出其位置。
    * 在音量对话框中读出上光标键可调整的数值。
    * 此数值默认不读出。

* NVDA+H

    * 打开插件帮助文档。

## 兼容性 ##

* 此插件兼容 NVDA 2019.3 及更高版本。

## 20231007.0.0 版本变更 ##

* 设置分割点后按 Ctrl+N 打开分割属性窗口时，增加窗口标题的无障碍提示（包含分段索引）
* 阅读模式下通过小键盘数字键 1-6 移动选择起止标记后，自动从新位置开始播放；
* 修复从音轨开头按 Ctrl+Shift+R 查询剩余时间时的错误。

## 20230728.0.0 版本变更 ##

* 对代码应用 flake8 和 mypy 规范；
* 将 NVDA 版本最低要求改为 2019.3 以支持 Python 3 类型注解。

## 20230607.0.0 版本变更 ##

* 新增以下工作流：
 * auto-update-translations：自动从 NVDA 翻译系统更新翻译。
 * release-on-tag.yaml：推送新标签时自动构建发布插件；
 * manual-release.yaml：手动构建发布新版本插件。
* 更新翻译。

## 20230508.0.0 及后续版本变更 ##

* 根据商店规范调整版本号、NVDA 版本最低要求及下载链接。

## 20.12 版本变更 ##

* 适配最新版 mp3directcut：录音和播放期间停止语音输出；
* 修复 Python 3 版 NVDA 的剩余时间读取功能。

## 19.02 版本变更 ##

* 在 NVDA 2018.2 及以上版本的设置面板中添加插件配置；
* 采用 YY.MM 格式版本编号（2位年份+小数点+2位月份）
* 适配 NVDA 2019.1 启用的新插件版本格式。

## 4.0 版本变更 ##

* 同时支持 Python 2.7 和 3；
* 修复插件路径包含非 ASCII 字符时的错误。

## 3.0 版本变更 ##

* 使用 gui.guiHelper 模块确保插件配置对话框正确显示；
* 使用 format 方法替代 %s 进行字符串格式化；
* 遵循开发指南规范。

## 2.3 版本变更 ##

* 为插件添加 GPL 许可证；
* 将选择结束标记查询快捷键从 Ctrl+Shift+N 改为 Ctrl+Shift+E（因新版 mp3DirectCut 中原快捷键失效）
* 添加 Ctrl+R 快捷键确认选择已取消；
* 优化 appModule/mp3directcut.py 代码。

## 2.2 版本变更 ##

* 修正选择标记位置查询脚本。

## 2.1.1 版本变更 ##

* 移除总时长专用脚本，将其整合至已用时间查询脚本；
* 在配置选项中单独设置空格键相关播报的启用/禁用；
* 在配置选项中单独设置选择标记放置提示的启用/禁用；
* 跳转分割点时增加读出当前分段编号；
* 修正垂直方向键相关播报；
* 添加 NVDA+H 打开插件帮助功能；
* 将插件配置菜单从"工具"菜单移至"选项"菜单。

## 2.1 版本变更 ##

* 添加 Ctrl+右光标键跳至下一分割点并读出；
* 添加 Ctrl+左光标键跳至上一分割点并读出；
* 添加 Shift+右光标键前进 0.04 秒并读出；
* 添加 Shift+左光标键后退 0.04 秒并读出；
* 将插件摘要从"for mp3DirectCut"改为"mp3DirectCut"。

## 2.0 版本变更 ##

* 添加 Ctrl+Shift+R 查询剩余时间；
* 修复包含小时的时长读取问题；
* 增加毫秒与百分秒的区分能力。

## 1.1 版本变更 ##

* 在输入手势设置中增加 mp3DirectCut 分类。；

    * 该分类仅在使用该软件时可见。

* 在 NVDA 工具菜单中添加"mp3DirectCut 配置"项，可启用/禁用自动消息；

## 1.0 版本变更 ##

* 初始版本。

[1]: https://www.nvaccess.org/addonStore/legacy?file=mp3DirectCut

[2]: https://www.nvaccess.org/addonStore/legacy?file=mp3DirectCut
